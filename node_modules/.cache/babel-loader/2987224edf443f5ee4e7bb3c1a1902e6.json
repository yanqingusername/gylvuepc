{"remainingRequest":"/Users/user/coyote/gyl/gylvuepc/node_modules/babel-loader/lib/index.js!/Users/user/coyote/gyl/gylvuepc/src/router/router-config.js","dependencies":[{"path":"/Users/user/coyote/gyl/gylvuepc/src/router/router-config.js","mtime":1657098512584},{"path":"/Users/user/coyote/gyl/gylvuepc/node_modules/cache-loader/dist/cjs.js","mtime":1683360100272},{"path":"/Users/user/coyote/gyl/gylvuepc/node_modules/babel-loader/lib/index.js","mtime":1683360100270}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3VzZXIvY295b3RlL2d5bC9neWx2dWVwYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvdXNlci9jb3lvdGUvZ3lsL2d5bHZ1ZXBjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuL2luZGV4IjsKaW1wb3J0IExheW91dCBmcm9tICIuLi9sYXlvdXQvaW5kZXgiOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7IC8vIHByb2dyZXNzIGJhcgoKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyBOUHJvZ3Jlc3MgQ29uZmlndXJhdGlvbgoKdmFyIGZpbHRlclJvdXRlcyA9IFsiL2xvZ2luIl07IC8vIOmcgOimgei/h+a7pOaOieeahOi3r+eUsQoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8gc3RhcnQgcHJvZ3Jlc3MgYmFyCiAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIOiOt+WPlui3r+eUsSBtZXRhIOS4reeahHRpdGxl77yM5bm26K6+572u57uZ6aG16Z2i5qCH6aKYCgogIGRvY3VtZW50LnRpdGxlID0gIuWKqOaAgei3r+eUsSgiICsgdG8ubWV0YS50aXRsZSArICIpIjsgLy8g5Yik5pat6Lev55Sx5oyH5ZCR5piv5ZCm5Zyo6ZyA6KaB6L+H5ruk55qE6Lev55Sx5Zyw5Z2A5pWw57uE6YeMCiAgLy8g5aaC5p6c5Zyo77yM5YiZ55u05o6l6Lez6L+b6aG16Z2i77yM5peg6ZyA5Yik5patCgogIGlmIChmaWx0ZXJSb3V0ZXMuaW5kZXhPZih0by5wYXRoKSAhPT0gLTEpIHsKICAgIG5leHQoKTsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChyb3V0ZXIub3B0aW9ucy5yb3V0ZXMubGVuZ3RoID09IDEpIHsKICAgIHZhciBfSlNPTiRwYXJzZTsKCiAgICAvLyDojrflj5Z0b2tlbuWSjOWOn+Wni+i3r+eUseaVsOe7hAogICAgdmFyIHVzZXJJbmZvID0gKF9KU09OJHBhcnNlID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpKSAhPT0gbnVsbCAmJiBfSlNPTiRwYXJzZSAhPT0gdm9pZCAwID8gX0pTT04kcGFyc2UgOiAiIjsgLy8g5b2TdG9rZW7lkozljp/lp4vot6/nlLHpg73lrZjlnKjnmoTml7blgJkKCiAgICBpZiAodXNlckluZm8udG9rZW4gJiYgdXNlckluZm8ucm91dGVzKSBvbkZpbHRlclJvdXRlcyh0bywgbmV4dCwgdXNlckluZm8ucm91dGVzKTsgLy8g5omn6KGM6Lev55Sx6L+H5ruk5ZKM6Lez6L2sCiAgICBlbHNlIG5leHQoewogICAgICBwYXRoOiAiL2xvZ2luIiwKICAgICAgcmVwbGFjZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIG5leHQoKTsKfSk7CnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKCkgewogIC8vIGZpbmlzaCBwcm9ncmVzcyBiYXIKICBOUHJvZ3Jlc3MuZG9uZSgpOwp9KTsgLy8g6Lev55Sx5ou85o6lCgpmdW5jdGlvbiBsb2FkVmlldyh2aWV3KSB7CiAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBpbXBvcnQoIkAvdmlld3MvIi5jb25jYXQodmlldykpOwogIH07Cn0gLy8g6Lev55Sx6L+H5ruk5ZKM6Lez6L2sCgoKZnVuY3Rpb24gb25GaWx0ZXJSb3V0ZXMoX3gsIF94MiwgX3gzKSB7CiAgcmV0dXJuIF9vbkZpbHRlclJvdXRlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8vIOi3r+eUsei/h+a7pCAgIOmBjeWOhui3r+eUsSDovazmjaLkuLrnu4Tku7blr7nosaHlkozot6/lvoQKCgpmdW5jdGlvbiBfb25GaWx0ZXJSb3V0ZXMoKSB7CiAgX29uRmlsdGVyUm91dGVzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBuZXh0LCBlKSB7CiAgICB2YXIgcm91dGVzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGZpbHRlckFTeW5jUm91dGVzKGUpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcm91dGVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgLy8g6Lev55Sx6L+H5rukCiAgICAgICAgICAgIHJvdXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGFbJ2lkJ10gLSBiWydpZCddOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICByb3V0ZXIub3B0aW9ucy5yb3V0ZXMucHVzaChpdGVtKTsKICAgICAgICAgICAgICByb3V0ZXIuYWRkUm91dGUoaXRlbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBuZXh0KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG8pLCB7fSwgewogICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgfSkpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9vbkZpbHRlclJvdXRlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBmaWx0ZXJBU3luY1JvdXRlcyhkYXRhKSB7CiAgdmFyIHJvdXRlcyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbVsiY29tcG9uZW50Il0gPT09ICJMYXlvdXQiKSBpdGVtLmNvbXBvbmVudCA9IExheW91dDtlbHNlIGl0ZW1bImNvbXBvbmVudCJdID0gbG9hZFZpZXcoaXRlbVsiY29tcG9uZW50Il0pOyAvLyDot6/nlLHpgJLlvZLvvIzovazmjaLnu4Tku7blr7nosaHlkozot6/lvoQKCiAgICBpZiAoaXRlbVsiY2hpbGRyZW4iXSAmJiBpdGVtWyJjaGlsZHJlbiJdLmxlbmd0aCA+IDApIGl0ZW1bImNoaWxkcmVuIl0gPSBmaWx0ZXJBU3luY1JvdXRlcyhpdGVtLmNoaWxkcmVuKTsKICAgIHJldHVybiB0cnVlOwogIH0pOwogIHJldHVybiByb3V0ZXM7Cn0="},{"version":3,"sources":["/Users/user/coyote/gyl/gylvuepc/src/router/router-config.js"],"names":["router","Layout","NProgress","configure","showSpinner","filterRoutes","beforeEach","to","from","next","start","document","title","meta","indexOf","path","options","routes","length","userInfo","JSON","parse","window","localStorage","getItem","token","onFilterRoutes","replace","afterEach","done","loadView","view","e","filterASyncRoutes","sort","a","b","forEach","item","push","addRoute","data","filter","component","children"],"mappings":"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","sourcesContent":["import router from \"./index\"\nimport Layout from \"../layout/index\"\nimport NProgress from 'nprogress' // progress bar\n\nNProgress.configure({ showSpinner: false }) // NProgress Configuration\n\nconst filterRoutes = [\"/login\"]   // 需要过滤掉的路由\nrouter.beforeEach((to, from, next) => {\n    // start progress bar\n    NProgress.start()\n\n    // 获取路由 meta 中的title，并设置给页面标题\n    document.title = \"动态路由(\" + to.meta.title + \")\"\n    \n    // 判断路由指向是否在需要过滤的路由地址数组里\n    // 如果在，则直接跳进页面，无需判断\n    if(filterRoutes.indexOf(to.path) !== -1) {\n        next()\n        return false\n    }\n    if(router.options.routes.length == 1) {\n        // 获取token和原始路由数组\n        const userInfo = JSON.parse(window.localStorage.getItem('userInfo')) ?? \"\"\n        // 当token和原始路由都存在的时候\n        if(userInfo.token && userInfo.routes) onFilterRoutes(to, next, userInfo.routes)  // 执行路由过滤和跳转\n        else next({ path: \"/login\", replace: true })\n    } else next()\n})\n\nrouter.afterEach(() => {\n    // finish progress bar\n    NProgress.done()\n})\n\n// 路由拼接\nfunction loadView(view) {\n    return () => import(`@/views/${ view }`)\n}\n\n// 路由过滤和跳转\nasync function onFilterRoutes(to, next, e) {\n    const routes = await filterASyncRoutes(e)    // 路由过滤\n    routes.sort((a, b) => a['id'] - b['id'])\n    routes.forEach(item => {\n        router.options.routes.push(item)\n        router.addRoute(item)\n    })\n    next({ ...to, replace: true })\n}\n\n// 路由过滤   遍历路由 转换为组件对象和路径\nfunction filterASyncRoutes(data) {\n    const routes = data.filter(item => {\n        if(item[\"component\"] === \"Layout\") item.component = Layout\n        else item[\"component\"] = loadView(item[\"component\"])\n        // 路由递归，转换组件对象和路径\n        if(item[\"children\"] && item[\"children\"].length > 0) item[\"children\"] = filterASyncRoutes(item.children)\n        return true\n    })\n    return routes\n}"]}]}